{% extends "base.html" %}
{% load static %}
{% block title %}Projects{% endblock %}
{% block content %}
<div class="container-fluid px-3 px-md-5">

  <!-- üöÄ Featured Projects -->
  {% if featured_projects %}
    <section class="featured-section rounded-4 my-5 py-4 px-2 px-md-4">
      <div class="container text-center mb-5">
        <h1 class="display-5 fw-bold">üöÄ Featured Projects</h1>
        <p class="lead">These are my most exciting and innovative projects.</p>
      </div>

      <div class="row row-cols-1 row-cols-md-2 g-4">
        {% for project in featured_projects %}
          <div class="col">
            <div class="featured-project position-relative bg-white rounded-4 shadow-lg h-100 p-0 overflow-hidden">
              <div class="ribbon">‚≠ê Featured</div>

              <!-- Image Carousel -->
              <div id="carouselFeatured{{ project.id }}" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                  {% for image in project.images.all %}
                    <div class="carousel-item {% if forloop.first %}active{% endif %}">
                      <img src="{{ image.image.url }}" class="d-block w-100 featured-img" alt="{{ project.title }}">
                    </div>
                  {% endfor %}
                </div>
              </div>

              <div class="p-4 d-flex flex-column h-100">
                <h3 class="fw-bold text-dark">{{ project.title }}</h3>
                <p class="text-muted">{{ project.meta_description }}</p>

                <div class="mb-3 tech-badges d-flex flex-wrap gap-2">
                  {% for tech in project.technologies.all %}
                    <span class="badge bg-primary">{{ tech.name }}</span>
                  {% endfor %}
                </div>

                <!-- Custom Button Grid -->
                <div class="row mt-auto pt-3 text-center">
                  <div class="col-4">
                    <a href="{% url 'projects:project_detail' slug=project.slug %}" class="btn btn-outline-primary btn-sm w-100">
                      <i class="bi bi-eye"></i> Details
                    </a>
                  </div>
                  <div class="col-4">
                    {% if project.github_link %}
                      <a href="{{ project.github_link }}" class="btn btn-dark btn-sm w-100">
                        <i class="bi bi-github"></i> GitHub
                      </a>
                    {% else %}
                      <div class="invisible btn btn-dark btn-sm w-100">Empty</div>
                    {% endif %}
                  </div>
                  <div class="col-4">
                    {% if project.demo_link %}
                      <a href="{{ project.demo_link }}" class="btn btn-success btn-sm w-100">
                        <i class="bi bi-box-arrow-up-right"></i> Live Demo
                      </a>
                    {% else %}
                      <div class="invisible btn btn-success btn-sm w-100">Empty</div>
                    {% endif %}
                  </div>
                </div>

              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </section>
  {% endif %}

  <!-- üíº My Projects -->
  <section class="projects-section rounded-4 mt-5 pb-5">
    <div class="container text-center mb-5 px-3 py-4 section-header rounded shadow-sm">
      <h1 class="display-6 fw-bold mb-2"><i class="bi bi-briefcase-fill me-2"></i>My Projects</h1>
      <p class="lead m-0 text-muted">Explore all of my projects below.</p>
    </div>

    <div class="row row-cols-1 row-cols-sm-2 g-4">
      {% for project in projects %}
        <div class="col">
          <div class="card h-100 shadow-sm border-0 project-card">
            <div class="carousel slide" id="carousel{{ project.id }}" data-bs-ride="carousel">
              <div class="carousel-inner">
                {% for image in project.images.all %}
                  <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    <img src="{{ image.image.url }}" class="d-block w-100" alt="{{ project.title }}">
                  </div>
                {% endfor %}
              </div>
            </div>
            <div class="card-body d-flex flex-column">
              <h5 class="card-title fw-bold">{{ project.title }}</h5>
              <p class="text-muted">{{ project.meta_description }}</p>
              <div class="mt-auto tech-badges d-flex flex-wrap gap-2 mb-2">
                {% for tech in project.technologies.all %}
                  <span class="badge bg-primary" title="{{ tech.name }}">{{ tech.name }}</span>
                {% endfor %}
              </div>
              <div class="d-flex flex-wrap gap-2 mt-auto">
                <a href="{% url 'projects:project_detail' slug=project.slug %}" class="btn btn-outline-primary btn-sm">
                  <i class="bi bi-eye"></i> Details
                </a>
                {% if project.github_link %}
                  <a href="{{ project.github_link }}" class="btn btn-dark btn-sm">
                    <i class="bi bi-github"></i> GitHub
                  </a>
                {% endif %}
                {% if project.demo_link %}
                  <a href="{{ project.demo_link }}" class="btn btn-success btn-sm">
                    <i class="bi bi-box-arrow-up-right"></i> Live Demo
                  </a>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </section>

</div>

<!-- üé® Styles -->
<style>
  :root {
    --primary-color: #ff7b54;
    --secondary-bg: #f8f9fa;
    --badge-color: #007bff;
  }

  .featured-section {
    background: #fff8f0;
  }

  .projects-section {
    background: var(--secondary-bg);
  }

  .featured-project,
  .project-card {
    border-radius: 12px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .featured-project:hover,
  .project-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
  }

  .featured-img {
    height: 220px;
    object-fit: cover;
  }

  .carousel-inner img {
    object-fit: cover;
    height: 180px;
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
  }

  .btn {
    font-size: 0.85rem;
    font-weight: 500;
  }

  .badge {
    font-size: 0.75rem;
    padding: 0.35em 0.6em;
    white-space: nowrap;
  }

  .tech-badges {
    max-height: 90px;
    overflow-y: auto;
    padding-right: 4px;
  }

  .tech-badges::-webkit-scrollbar {
    height: 5px;
    width: 5px;
  }

  .tech-badges::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.1);
    border-radius: 4px;
  }

  .ribbon {
    position: absolute;
    top: 10px;
    left: 10px;
    background: #ffc107;
    color: #000;
    font-size: 0.7rem;
    font-weight: 600;
    padding: 4px 8px;
    border-radius: 6px;
    z-index: 2;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }

  .section-header {
    background: #ffffff;
    border-left: 5px solid var(--primary-color);
    max-width: 600px;
  }

  @media (max-width: 576px) {
    .carousel-inner img,
    .featured-img {
      height: 160px;
    }

    .project-card .btn,
    .featured-project .btn {
      flex: 1 1 100%;
      text-align: center;
    }

    .ribbon {
      font-size: 0.6rem;
      padding: 2px 6px;
    }

    .row.mt-auto.pt-3 .col-4 {
      padding-bottom: 0.5rem;
    }
  }
</style>

<!-- üß© Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
{% endblock %}
